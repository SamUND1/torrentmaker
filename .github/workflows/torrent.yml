name: Create torrent
on:
  push:
    branches:
      - master
      
env:
  name: "pp"
  comment: "Android Studio for Windows"
  url: "https://dw.uptodown.net/dwn/hJiOQLTx4MRA-CpKwwOelcu-m1pLee7LldzQFh1ZPTN_ebHLXF1rSFtDmYmp_EH03R9OlGuYBe72pzb14pz2biAS60phVZztOFebnjB1hQCCrHVJjOCtoI0JiMS56JW_/enQCuMJTFXiQ-Bn8SkGSbXP0i54XJOmhItvBXJPakXupm0LF7bIrqby0n51a09ABN4Gfpxgx7nZbUimrfu7_lxOw3ChhP3h3Qg8bO0roPlowG_wYfZm46UmOjsS8dGfi/qEl6lmtRo3CrVuq2ymKyvAaiG8YhUoH1ePwrSFB8LnAIAOZ5Ax3kIccd2t7-7xplM4yzYLENpGvQI0Je3M_A8JJBnHPAzEFxvn80tcLHmnw=/plunder-pirates-2-7-1.apk"
  file_name: "plunder-pirates-2-7-1.apk"
  piece_size: 19 # Check the README.md for recommended piece size
      
jobs:
  create:
    runs-on: ubuntu-20.04
    steps:
      - name: Install mktorrent
        run: sudo apt-get install mktorrent
        
      - name: Download file
        run: wget -nv -O "$file_name" "$url"
        
      - name: Create torrent using mktorrent
        run: mktorrent -c "$comment" -l $piece_size -o "${name}.torrent" -w "$url" "$file_name"
        
      - name: Upload torrent file
        uses: actions/upload-artifact@v2
        with:
          name: ${{ env.name }}
          path: ${{ env.name }}.torrent
